<Page
    x:Class="Pinturillo.ListadoSalas"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Pinturillo"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:Windows10version1809="http://schemas.microsoft.com/winfx/2006/xaml/presentation?IsApiContractPresent(Windows.Foundation.UniversalApiContract, 7)"
    xmlns:local1="using:Pinturillo.Utils"
    mc:Ignorable="d"

    
    DataContext="{Binding ListadoSalasInstance, 
    Source={StaticResource Locator}}"
    >

    <Page.Resources>
        <local1:PasswordToVisibilityConverter x:Key="PasswordConverter" ></local1:PasswordToVisibilityConverter>
    </Page.Resources>
    
    <RelativePanel
        Background="#4f98ca"
        
        >
        <TextBlock x:ConnectionId='2' Text="Salas" 
                   Foreground="#effffb"
                   Name="txtSalas"
                   FontSize="50"
                   Margin="50,20,0,0"
                   TextWrapping="Wrap" 
                    RelativePanel.AlignHorizontalCenterWithPanel="True"
                   RelativePanel.AlignTopWithPanel="True"
                   />

        <!--<Button
            RelativePanel.AlignLeftWithPanel="True"
            RelativePanel.AlignTopWithPanel="True"
            Content="Atrás"
            CornerRadius="10"
            Margin="5"
            >
            
        </Button>-->
        <Path x:ConnectionId='3' Stretch="Fill" 
                                                 
              Name="backArrow"
              RelativePanel.AlignVerticalCenterWith="txtSalas"
              RelativePanel.AlignLeftWithPanel="True"
              Fill="#effffb" 
              Margin="50,20,0,0"
          Data="M 0,110 70,110 45,90 75,90 120,120 75,150 45,150 70,130 0,130 Z"  
              Width="40" Height="40"
          RenderTransformOrigin=".5,.5" UseLayoutRounding="False" 
              HorizontalAlignment="Stretch" 
              VerticalAlignment="Stretch">
            <Path.RenderTransform>
                <RotateTransform Angle="180" />
            </Path.RenderTransform>
        </Path>

        <Border
            RelativePanel.AlignHorizontalCenterWithPanel="True"
            RelativePanel.Below="txtSalas"
           RelativePanel.RightOf="backArrow"
            RelativePanel.LeftOf="crearBtn"
            Margin="30,30,160,30"
            Opacity="0.75"
            Background="#effffb"
                CornerRadius="30" 
            >
            <ListView x:ConnectionId='5'
            
                Name="listadoSalas"
                ItemsSource="{Binding ListadoPartidas}"
                        
                >
                <ListView.ItemTemplate>
                    <DataTemplate>
                        <RelativePanel
                        
                        >

                            <AppBarButton
                                        Name="icon"
                                        Margin="0,10,5,0"
                                Icon="Permissions"
                                IsEnabled="{Binding Password, Mode=OneWay, Converter={StaticResource PasswordConverter}}"
                                        RelativePanel.AlignLeftWithPanel="True"
                                        RelativePanel.AlignTopWithPanel="True"
                                        Foreground="#272727"
                                >

                            </AppBarButton>
                            <TextBlock  
                                Foreground="#272727"
                                FontSize="20"
                                        Name="txtSala"
                                        RelativePanel.AlignTopWithPanel="True"
                                        RelativePanel.RightOf="icon"
                                Margin="0,10,5,0" Text="{Binding NombreSala, UpdateSourceTrigger=PropertyChanged}" />



                            <StackPanel
                                Orientation="Horizontal"
                                RelativePanel.RightOf="txtSala"
                                        RelativePanel.AlignBottomWith="txtSala"
                                >
                                <TextBlock
                                        
                                Margin="100,10,5,0"
                                Foreground="#272727"
                                FontSize="10"
                                    Text="{Binding ListadoJugadores.Count}"
                                ></TextBlock>
                                <TextBlock
                                        
                                Margin="0,10,5,0"
                                Foreground="#272727"
                                FontSize="10"
                                >/</TextBlock>
                                <TextBlock
                                        
                                Margin="0,10,5,0"
                                Foreground="#272727"
                                FontSize="10"
                                    Text="{Binding NumeroMaximoJugadores}"
                                ></TextBlock>

                            </StackPanel>

                           

                        </RelativePanel>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>
        </Border>
        

        <!--<RelativePanel
            RelativePanel.Below="txtSalas"
            RelativePanel.AlignLeftWithPanel="True"
            RelativePanel.AlignRightWithPanel="True"
            RelativePanel.AlignBottomWithPanel="True"
            
            >

            

            --><!--<Border 
            Name="borderStackPanel"
            RelativePanel.AlignTopWithPanel="True"
            RelativePanel.AlignLeftWithPanel="True"
            RelativePanel.AlignRightWithPanel="True"
            RelativePanel.AlignBottomWithPanel="True"
            Margin="30,30,160,30"
            
                CornerRadius="30" 
                >
                <StackPanel
            
                Opacity="0.75"
                
            Background="#effffb"
            Name="stkpanelListados"
            >
                    <ListView
                Name="listadoSalas"
                ItemsSource="{Binding ListadoPartidas}"
                        
                >
                        <ListView.ItemTemplate>
                            <DataTemplate>
                                <RelativePanel
                        
                        >

                                    <AppBarButton
                                        Name="icon"
                                        Margin="0,10,5,0"
                                Icon="Permissions"
                                        RelativePanel.AlignLeftWithPanel="True"
                                        RelativePanel.AlignTopWithPanel="True"
                                        Foreground="#272727"
                                >

                                    </AppBarButton>
                                    <TextBlock  
                                Foreground="#272727"
                                FontSize="20"
                                        Name="txtSala"
                                        RelativePanel.AlignTopWithPanel="True"
                                        RelativePanel.RightOf="icon"
                                Margin="0,10,5,0" Text="{Binding NombreSala, UpdateSourceTrigger=PropertyChanged}" />

                                    <TextBlock
                                        RelativePanel.RightOf="txtSala"
                                        RelativePanel.AlignBottomWith="txtSala"
                                Margin="100,10,5,0"
                                Foreground="#272727"
                                FontSize="10"
                                >3/5</TextBlock>

                                </RelativePanel>
                            </DataTemplate>
                        </ListView.ItemTemplate>
                    </ListView>
                </StackPanel>
            </Border>--><!--



        </RelativePanel>-->


        <Button x:ConnectionId='4'
            Name="crearBtn"
                FontSize="25"
                Windows10version1809:CornerRadius="15"
                RelativePanel.AlignRightWithPanel="True"
                Command="{Binding CreateGroupCommand}"
                Margin="20,40,20,30"
                Foreground="#effffb"
         
                >
            Crear sala
        </Button>

    </RelativePanel>

</Page>

